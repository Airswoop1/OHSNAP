angular.module("formApp.documentUploadConfig",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function($stateProvider){$stateProvider.state("upload",{url:"/upload",templateUrl:"templates/documents/upload-main.html",controller:"documentUploadCtrl"}).state("upload.documents",{url:"/documents",templateUrl:"templates/documents/form-document-upload.html"}).state("upload.detail",{url:"/detail?type",templateUrl:"templates/documents/form-document-detail.html"}).state("upload.completion",{url:"/completion?type",templateUrl:"templates/documents/form-document-completion.html"})}]),angular.module("formApp.documentUploadCtrl",["formApp.ngDocumentFullscreen","formApp.DocumentUploader","formApp.userDataFactory","formApp.sampleDocumentsDirective"]).controller("documentUploadCtrl",["$scope","$upload","$state","$stateParams","$rootScope","$location","$window","documentUpload","userDataFactory",function($scope,$upload,$state,$stateParams,$rootScope,$location,$window,documentUpload,userDataFactory){$scope.docs=userDataFactory.userData.docs,$scope.docProgress=userDataFactory.userData.docProgress,$scope.user="undefined"!=typeof userDataFactory.userData.user.formData?userDataFactory.userData.user.formData:{},$scope.date=new Date,$scope.date_of_interview=new Date,$scope.date_of_interview.setDate($scope.date.getDate()+10),$scope.DOC_STATUS={UPLOADED:2,IN_PROGRESS:1,NOT_UPLOADED:0},$scope.localDocs={IDENTITY:0,RESIDENCE:0,HOUSEHOLD_COMPOSITION:0,AGE:0,SSN:0,CITIZENSHIP:0,ALIEN_STATUS:0,EARNED_INCOME:0,ALT_INCOME:0,RESOURCES:0},$scope.current_type=$state.params.type,$scope.docSafetyOpen=!1,$rootScope.$on("$stateChangeStart",function(event,toState,toParams){toParams&&($scope.current_type=toParams.type)}),$scope.renderImg=function(type,url){$scope.localDocs[type]=url},$scope.isNotUploaded=function(name){return $scope.docs[name]===$scope.DOC_STATUS.NOT_UPLOADED},$scope.isInProgress=function(name){return $scope.docs[name]===$scope.DOC_STATUS.IN_PROGRESS},$scope.isUploaded=function(name){return $scope.docs[name]===$scope.DOC_STATUS.UPLOADED},$scope.goToDocUpload=function(name){$state.go("upload.detail",{type:name})},$scope.goToCompletion=function(){$state.go("upload.completion",{type:"Completion"})},$scope.getCurrentContent=function(){var type=$state.params.type;return $scope.current_sample_image=$scope.docContent[type].sample_image,$scope.docContent[type].header},$scope.getDocDetailState=function(){return $scope.docs[$state.params.type]},$scope.getCurrentType=function(){return"ALT_INCOME"==$state.params.type?"OTHER INCOME":"EARNED_INCOME"==$state.params.type?"INCOME":"HOUSING_EXPENSE"==$state.params.type?"HOUSING EXPENSES":$state.params.type?$state.params.type:"Documents"},$scope.uploadFile=function($files){var type=$state.params.type;$scope.docs[type]=$scope.DOC_STATUS.IN_PROGRESS,$scope.uploadProgress(type),console.log($files),documentUpload.onFileSelect($files,$scope,type,$scope.user.user_id).then(function(){$scope.docProgress[type]=100,$scope.docs[type]=$scope.DOC_STATUS.UPLOADED},function(){$scope.docs[type]=$scope.DOC_STATUS.NOT_UPLOADED,alert("Sorry we were unable to upload your documents, please try again")})},$scope.uploadProgress=function(type){$scope.docProgress[type]+=10;var upload=setInterval(function(){$scope.docProgress[type]<100&&$scope.docs[type]!==$scope.DOC_STATUS.UPLOADED?$scope.docProgress[type]+=10:($scope.docProgress[type]=100,clearInterval(upload))},50)},$scope.updateUploadedFilesStatus=function(data){var status=data.status;if(status)for(var uploaded in status)status.hasOwnProperty(uploaded)&&($scope.docs[uploaded]=status[uploaded])},$window.onbeforeunload=function(){var message="Your documents are still uploading! If you leave now they won't be submitted.";return $scope.docStillUploading()?("undefined"==typeof event&&(event=window.event),event&&(event.returnValue=message),message):null},$scope.docStillUploading=function(){var uploading=!1;for(var x in $scope.docs)uploading=uploading||$scope.docs[x]===$scope.DOC_STATUS.IN_PROGRESS;return uploading},$scope.docContent={IDENTITY:{header:"Take a picture of 1 of these documents to confirm your identity.",sample_image:"sample_id.png",valid_docs:[{name:"Drivers license or state photo ID",image:"sample_dl.jpg",link:"http://dmv.ny.gov/driver-license/get-driver-license"},{name:"US Passport",image:"sample_passport.jpg",link:"https://www.usps.com/shop/apply-for-a-passport.htm"}]},RESIDENCE:{header:"Take a picture of 1 of these documents to confirm where you live.",sample_image:"sample_address.png",valid_docs:[{name:"Lease",image:"sample_lease.jpg",link:"http://www.ehow.com/how_6147098_request-copy-apartment-lease-mail.html"},{name:"Statement from landlord or primary tenant",image:"sample_addressstatement.jpg",link:"http://www.wikihow.com/Write-a-Letter-Showing-Proof-of-Residence-for-a-Tenant"},{name:"Mortgage record",image:"sample_mortgagerecord.jpg",link:"http://a836-acris.nyc.gov/CP/"}]},HOUSING_EXPENSE:{header:"Take a picture of 1 of these documents to confirm how much you pay for housing.",sample_image:"sample_housingexpense.png",valid_docs:[{name:"Lease, if you do not split the rent",image:"sample_lease.jpg",link:"http://www.ehow.com/how_6147098_request-copy-apartment-lease-mail.html"},{name:"Rent receipt, if you do not split the rent",image:"sample_rentreceipt.jpg",link:"http://www.masslegalhelp.org/housing/private-housing/ch3/security-deposit-landlords-responsiblities"},{name:"Statement from roommates, if you split the rent",image:"sample_housingstatement.jpg",link:"http://www.lawdepot.com/contracts/roommate-agreement/"}]},HOUSEHOLD_COMPOSITION:{header:"Take a picture of 1 of these documents to prove who lives with you.",sample_image:"sample_household.png",valid_docs:[{name:"Statement from your landlord",image:"sample_addressstatement.jpg",link:"http://www.wikihow.com/Write-a-Letter-Showing-Proof-of-Residence-for-a-Tenant"},{name:"School records",image:"sample_schoolrecord.jpg",link:"http://www1.nyc.gov/nyc-resources/service/2557/student-record-request"}]},UTILITIES:{header:"Take a picture of 1 of these documents to confirm utilities you pay for separate from rent.",sample_image:"sample_utilities.png",valid_docs:[{name:"Utility bill",image:"sample_utility.jpg"},{name:"Telephone bill",image:"sample_phonebill.jpg"}]},SSN:{header:"Take a picture of 1 of these documents to confirm your Social Security Number.",sample_image:"sample_ssn.png",valid_docs:[{name:"Social Security Card",image:"sample_ssn.jpg",link:"http://www.nyc.gov/html/id/html/how/social_security_card.shtml"},{name:"Official mail from the SSA",image:"sample_ssamail.jpg"}]},CITIZENSHIP:{header:"Take a picture of one of these documents to confirm your citizenship status.",sample_image:"sample_citizen.png",valid_docs:[{name:"US Passport",image:"sample_passport.jpg",link:"https://www.usps.com/shop/apply-for-a-passport.htm"},{name:"US Birth Certificate",image:"sample_birth_cert.jpg",link:"http://www.nyc.gov/html/id/html/how/birth_certificate.shtml"},{name:"US Military service record",image:"sample_military.jpg",link:"http://themilitarywallet.com/how-to-get-a-military-id-card/"},{name:"Naturalization Certificate",image:"sample_naturalization.jpg",link:"http://www.uscis.gov/tools/how-do-i-customer-guides/how-do-i-guides-us-citizens/how-do-i-obtain-certified-true-copies-certificate-naturalization"}]},EARNED_INCOME:{header:"Take a picture of 1 of these documents to confirm income that you've earned.",sample_image:"sample_income.png",valid_docs:[{name:"Pay stub",image:"sample_paystub.jpg",link:"http://www.ehow.com/how_8353804_copy-pay-stubs.html"},{name:"Tax return",image:"sample_taxreturn.jpg",link:"http://www.irs.gov/Individuals/Get-Transcript"},{name:"Statement from employer",image:"sample_incomestatement.jpg",link:"hhttp://www.wikihow.com/Write-a-Letter-for-Proof-of-Income"},{name:"Invoice, if you are self-employed",image:"sample_invoice.jpg"}]},ALT_INCOME:{header:"Take a picture of 1 of these documents to confirm alternate sources of income.",sample_image:"sample_altincome.png",valid_docs:[{name:"Current unemployment award certificate",image:"sample_unemploymentcert.jpg",link:"http://www.ehow.com/how_8421455_do-proof-unemployment.html"},{name:"Current Social Security benefit check",image:"sample_sscheck.jpg",link:"http://www.ssa.gov/pubs/EN-05-10552.pdf"},{name:"Statement from person paying child support",image:"empty.jpg",link:"http://info.legalzoom.com/evidence-child-support-payments-23480.html"},{name:"Check stubs from child support",image:"empty.jpg",link:"http://info.legalzoom.com/evidence-child-support-payments-23480.html"},{name:"Current veteran's benefit check",image:"empty.jpg"},{name:"Current worker's compensation certificate",image:"sample_workerscompcert.jpg"}]},OTHER:{header:"Take a picture of 1 of these documents to confirm alternate sources of income.",sample_image:"sample_utilities.png",valid_docs:[]}},$scope.goBack=function(){window.history.back()}}]),angular.module("formApp.formController",["angularFileUpload","ui.router","ui.bootstrap","ngTouch","NoContactModal","formApp.CalcBenefitService","formApp.infoFooterDirective","formApp.ngEnterDirective","formApp.telephoneFilter","formApp.ssnFilter","formApp.apiFactory","formApp.appSubmittedDropdownDirective","formApp.feedbackFooterDirective","formApp.modalDirective","formApp.documentUploadCtrl","formApp.userDataFactory"]).controller("formController",["$scope","$state","$http","$rootScope","$upload","$location","$window","API","userDataFactory","calcBenefitService",function($scope,$state,$http,$rootScope,$upload,$location,$window,API,userDataFactory,calcBenefitService){function calcPotentialImmeditateBenefit(){return $scope.formData.total_resources<=100||$scope.formData.income<=150||$scope.formData.income+$scope.formData.total_resources<=$scope.formData.expenses}function showNoContactModal(){$scope.modalShown=!0}function updateProgress(u){$scope.completed_items[u]=!0,$scope.progress=0;for(var comp in $scope.completed_items)$scope.completed_items[comp]&&($scope.progress+=12.5)}function updateEligibilityProgress(u){$scope.eligibilityCompleted[u]=!0,$scope.eligibility_progress=0;for(var comp in $scope.eligibilityCompleted)$scope.eligibilityCompleted[comp]&&($scope.eligibility_progress+=20)}$scope.formData=userDataFactory.userData.user.formData,$scope.progress=0,$scope.date=new Date,$scope.date_of_interview=new Date,$scope.date_of_interview.setDate($scope.date.getDate()+10),$scope.date_of_phone_call=new Date,$scope.date_of_phone_call.setDate($scope.date.getDate()+7),$scope.basic_confirmation_agree=!1,$scope.submitted_name=!1,$scope.submitted_address=!1,$scope.submitted_phone=!1,$scope.submitted_income=!1,$scope.submitted_household=!1,$scope.submitted_expenses=!1,$scope.has_phone=!0,$scope.has_address=!0,$scope.completed_first_name=!1,$scope.submitted_basic_information=!1,$scope.feedback_collapsed=!0,$scope.disable_submit=!1,$scope.show_progress_bar=!0,$scope.remove_progress_bar=!1,$scope.show_elig_progress_bar=!1,$scope.goingThroughEligibility=!1,$scope.submitting_app=!1,$scope.inputOtherUtils=!1,$scope.completed_items={name:!1,address:!1,telephone:!1,income:!1,household:!1,expenses:!1,ssn:!1,citizenship:!1,school_district:!1,township:!1,lived_at_duration:!1},$scope.eligibilityCompleted={household:!1,income:!1,citizenship:!1,expenses:!1},$scope.rating_options=[{label:"Select",value:-1},{label:"Definitely - 10",value:10},{label:"9",value:9},{label:"8",value:8},{label:"7",value:7},{label:"6",value:6},{label:"5",value:5},{label:"4",value:4},{label:"3",value:3},{label:"2",value:2},{label:"Absolutely Not - 1",value:1}],$scope.selected_rating=$scope.rating_options[0],$scope.show_progress=!("form.intro"===$state.current.name),$scope.completedName=function(){if($scope.snapForm.$valid&&$scope.formData.name.first_name&&$scope.formData.name.last_name)updateProgress("name"),$state.go("form.address");else{var field_invalid=$scope.snapForm.$error.required,which="";which=2==field_invalid.length?"both":"first_name"==field_invalid[0].$name?"first_name":"last_name",$scope.submitted_name=!0,$window.ga("send","event","name_validate","tap",which,1)}},$scope.checkboxAlert=function(){alert("You must check the box to certify your information is true before we can submit your application.")},$scope.completedAddress=function(){$scope.submitted_address=!0,$scope.snapForm.street_address.$pristine&&$scope.snapForm.zip.$pristine?(updateProgress("address"),$scope.has_address=!1,$state.go("form.lived-at-duration")):$scope.snapForm.street_address.$valid&&$scope.snapForm.zip.$valid&&$scope.formData.address.street_address&&$scope.formData.address.zip?(updateProgress("address"),$state.go("form.lived-at-duration")):!$scope.snapForm.street_address.$dirty&&!$scope.snapForm.zip.$dirty||""!==$scope.formData.address.street_address&&"undefined"!=typeof $scope.formData.address.street_address||!(null===$scope.formData.address.zip||"undefined"==typeof $scope.formData.address.zip&&$scope.snapForm.street_address.$valid&&$scope.snapForm.zip.$valid)||(updateProgress("address"),$scope.has_address=!1,$state.go("form.lived-at-duration")),console.log($scope.snapForm.street_address),console.log($scope.snapForm.zip)},$scope.completedLivedAt=function(){$state.go($scope.formData.household&&$scope.formData.income?"form.ssn":"form.citizenship")},$scope.completedTelephone=function(){$scope.submitted_phone=!0,$scope.snapForm.$valid&&($scope.submitting_app=!0,updateProgress("telephone"),$scope.remove_progress_bar=!0,$scope.submitBasicApp(),calcBenefitService.calculate($scope.formData))},$scope.completedSSN=function(){$scope.submitted_ssn=!0,!$scope.formData.ssn&&$scope.snapForm.ssn.$valid?(showNoContactModal(),submitted_ssn=!1):$scope.formData.ssn&&$scope.snapForm.ssn.$valid&&(updateProgress("ssn"),$state.go("form.telephone"))},$scope.completedIncome=function(){$scope.submitted_income=!0,$scope.snapForm.income.$valid&&(updateProgress("income"),$state.go("form.resources"))},$scope.completedHousehold=function(){$scope.submitted_household=!0,$scope.snapForm.household.$valid&&(updateProgress("household"),$state.go("form.income"))},$scope.completedResources=function(){$scope.submitted_resources=!0,$scope.snapForm.total_resources.$valid&&(updateProgress("resources"),$state.go("form.expenses"))},$scope.completedExpenses=function(){$scope.submitted_expenses=!0,$scope.snapForm.expenses.$valid&&(updateProgress("expenses"),calcPotentialImmeditateBenefit()?($scope.show_progress_bar=!1,$state.go("form.quick-snap-1")):$state.go("form.ssn"))},$scope.addToPaidUtilities=function(type){"undefined"==typeof $scope.formData.utilities_paid&&($scope.formData.utilities_paid=[]),$scope.formData.utilities_paid.indexOf(type)<0?$scope.formData.utilities_paid.push(type):$scope.formData.utilities_paid.splice($scope.formData.utilities_paid.indexOf(type),1)},$scope.goToNextQuickSnap=function(num){$state.go(0==num?"form.quick-snap-eligible":"form.quick-snap-"+num)},$scope.inputOtherUtilities=function(){$scope.inputOtherUtils=!0},$scope.completedEligibilityIncome=function(){$scope.submitted_income=!0,$scope.snapForm.income.$valid&&(updateEligibilityProgress("income"),$state.go("form.resources"))},$scope.completedEligibilityHousehold=function(){$scope.submitted_household=!0,$scope.snapForm.household.$valid&&(updateEligibilityProgress("household"),$state.go("form.income"))},$scope.completedEligibilityResources=function(){$scope.submitted_resources=!0,$scope.snapForm.total_resources.$valid&&(updateEligibilityProgress("resources"),$state.go("form.eligibility-expenses"))},$scope.completedCitizenship=function(){$scope.submitted_citizenship=!0,$scope.formData.citizenship&&("none"==$scope.formData.citizenship?$state.go("form.ineligible"):$scope.goingThroughEligibility?(updateEligibilityProgress("citizenship"),$state.go("form.household")):(updateProgress("citizenship"),$state.go("form.household")))},$scope.completedNonCitizenship=function(){$scope.submitted_non_citizen=!0,$scope.formData.non_citizen&&($scope.goingThroughEligibility?(updateEligibilityProgress("citizenship"),$state.go("form.household")):(updateProgress("citizenship"),$state.go("form.household")))},$scope.completeEligibilityCalc=function(){$scope.submitted_expenses=!0,$scope.snapForm.expenses.$valid&&(calcBenefitService.calculate($scope.formData),updateProgress("expenses"),$scope.show_elig_progress_bar=!1,$scope.show_progress_bar=!0,$scope.remove_progress_bar=!0,$state.go("form.eligibility"))},$scope.$on("show-progress-bar",function(){console.log("show progress bar being called!!"),$scope.show_progress_bar=!0}),$scope.$on("dont-show-progress-bar",function(){$scope.show_progress_bar=!1}),$scope.$on("remove_progress_bar",function(){$scope.remove_progress_bar=!0}),$scope.$on("add-progress-bar",function(){$scope.remove_progress_bar=!1}),$scope.$on("show-elig-progress-bar",function(){$scope.show_elig_progress_bar=!0,$scope.show_progress_bar=!1,$scope.goingThroughEligibility=!0}),$scope.updateCurrentAndGoToNext=function(current,next){$scope.goingThroughEligibility?updateEligibilityProgress(current.split(".")[1]):updateProgress(current.split("."[1])),$state.go(next)},$scope.updateProgress=function(u){updateProgress(u)},$scope.submitBasicApp=function(){calcBenefitService.calculate($scope.formData),updateProgress("confirmation"),API.uploadBasicInfo($scope.formData,function(result,user_id){result&&user_id?($scope.formData.user_id=user_id,userDataFactory.userData.user.formData=$scope.formData,$scope.remove_progress_bar=!0,$state.go("form.basic-app-submitted")):($scope.submitting_app=!1,alert("Oops! Looks like something went wrong. Your form was NOT submitted. Please wait and try again."))})},$scope.submitFeedback=function(rating){$scope.formData.rating=rating,"-1"!=rating.value?API.uploadFeedback($scope.formData,function(result){result?$state.go("form.feedback-submitted"):alert("Oops Looks like something went wrong. Your feedback was NOT submitted. Please wait and try again.")}):alert("You must select a rating first!")},$scope.goBack=function(){"form.basic-app-submitted"!==$state.current.name&&window.history.back()},$rootScope.$on("$stateChangeStart",function(event,toState){"form.intro"==toState.name?($window.scrollTo(0,0),$scope.show_progress_bar=!0,$scope.goingThroughEligibility=!1,$scope.show_progress=!1):($scope.goingThroughEligibility&&"form.name"==toState.name&&($scope.show_progress_bar=!0),$scope.show_progress=!0)})}]),angular.module("formApp.interviewConfig",["ui.router","formApp.userDataFactory"]).config(["$stateProvider","$urlRouterProvider",function($stateProvider){$stateProvider.state("int",{url:"/interview",templateUrl:"templates/interview/interview.html",controller:"interviewCtrl"}).state("int.main",{url:"/main",templateUrl:"templates/interview/interview-main.html"}).state("int.ssn",{url:"/ssn",templateUrl:"templates/interview/interview-ssn.html"}).state("int.dob",{url:"/dob",templateUrl:"templates/interview/interview-dob.html"}).state("int.self-gender",{url:"/gender",templateUrl:"templates/interview/interview-self-gender.html"}).state("int.marital_status",{url:"/marital_status",templateUrl:"templates/interview/interview-marital-status.html"}).state("int.state_id",{url:"/state_id",templateUrl:"templates/interview/interview-self-state-id.html"}).state("int.school",{url:"/school",templateUrl:"templates/interview/interview-self-school.html"}).state("int.school-grade",{url:"/school-grade",templateUrl:"templates/interview/interview-self-grade.html"}).state("int.school-name",{url:"/school-name",templateUrl:"templates/interview/interview-self-school-name.html"}).state("int.school-FT",{url:"/school-FT",templateUrl:"templates/interview/interview-self-school-ft.html"}).state("int.pregnant",{url:"/pregnant",templateUrl:"templates/interview/interview-self-pregnant.html"}).state("int.pregnant-due-date",{url:"/pregnant-due-date",templateUrl:"templates/interview/interview-self-pregnant-due-date.html"}).state("int.pregnant-num-babies",{url:"/pregnant-num-babies",templateUrl:"templates/interview/interview-self-pregnant-num-babies.html"}).state("int.disabled",{url:"/disabled_or_pregnant",templateUrl:"templates/interview/interview-disabled.html"}).state("int.citizen",{url:"/citizen",templateUrl:"templates/interview/interview-citizen.html"}).state("int.household",{url:"/household-names",templateUrl:"templates/interview/interview-household-names.html"}).state("int.household-applying",{url:"/household-applying",templateUrl:"templates/interview/interview-household-applying.html"}).state("int.household-ssn",{url:"/household-ssn",templateUrl:"templates/interview/interview-household-ssn.html"}).state("int.household-gender",{url:"/household-gender",templateUrl:"templates/interview/interview-household-gender.html"}).state("int.household-state-id",{url:"/household-state-id",templateUrl:"templates/interview/interview-household-state-id.html"}).state("int.household-marital-status",{url:"/household-marital-status",templateUrl:"templates/interview/interview-household-marital-status.html"}).state("int.household-lives-with",{url:"/household-lives-with",templateUrl:"templates/interview/interview-household-lives-with.html"}).state("int.household-in-school",{url:"/household-in-school",templateUrl:"templates/interview/interview-household-in-school.html"}).state("int.household-pregnant",{url:"/household-pregnant",templateUrl:"templates/interview/interview-household-pregnant.html"}).state("int.household-is-citizen",{url:"/household-is-citizen",templateUrl:"templates/interview/interview-household-citizenship.html"}).state("int.household-dob",{url:"/household-dob",templateUrl:"templates/interview/interview-household-dob.html"}).state("int.household-relation",{url:"/household-relation",templateUrl:"templates/interview/interview-household-relation.html"}).state("int.other-state-benefits",{url:"/other-benefits",templateUrl:"templates/interview/interview-household-other-state-benefits.html"}).state("int.disqualification",{url:"/disqualification",templateUrl:"templates/interview/interview-household-disqualification.html"}).state("int.other-name-applied",{url:"/other-name-applied",templateUrl:"templates/interview/interview-household-other-name-applied.html"}).state("int.in-military",{url:"/in-military",templateUrl:"templates/interview/interview-household-in-military.html"}).state("int.in-military-family",{url:"/in-military-family",templateUrl:"templates/interview/interview-household-in-military-family.html"}).state("int.foster-care",{url:"/foster-care",templateUrl:"templates/interview/interview-household-foster-care.html"}).state("int.foster-care-end",{url:"/foster-care-end",templateUrl:"templates/interview/interview-household-foster-care-end.html"}).state("int.medical-need",{url:"/medical-need",templateUrl:"templates/interview/interview-household-medical-need.html"}).state("int.medical-lt-care",{url:"/medical-lt-care",templateUrl:"templates/interview/interview-household-medical-lt-care.html"}).state("int.medical-unpaid",{url:"/medical-unpaid",templateUrl:"templates/interview/interview-household-medical-unpaid.html"}).state("int.domestic-abuse",{url:"/domestic-abuse",templateUrl:"templates/interview/interview-household-domestic-abuse.html"}).state("int.medical-medication",{url:"/medical-medication",templateUrl:"templates/interview/interview-household-medical-medication.html"}).state("int.drug-abuse",{url:"/drug-abuse",templateUrl:"templates/interview/interview-household-drug-abuse.html"}).state("int.criminal-defendant",{url:"/criminal-defendant",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Does anyone have a summons or warrant to appear as a defendant at a criminal court proceeding?",$scope.route_name="criminal-defendant",$scope.data_name="criminal_defendant",$scope.data_name_input="criminal_defendant_input",$scope.to_route_name="criminal-fines-payment",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.criminal-fines-payment",{url:"/criminal-fines-payment",templateUrl:"templates/interview/interview-household-criminal-fines-payment.html"}).state("int.criminal-payment-plan",{url:"/criminal-payment-plan",templateUrl:"templates/interview/interview-household-criminal-payment-plan.html"}).state("int.criminal-probation",{url:"/criminal-probation",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Is anyone on probation or parole?",$scope.route_name="criminal-probation",$scope.data_name="criminal_probation",$scope.data_name_input="criminal_probation_input",$scope.to_route_name="welfare-fraud",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.welfare-fraud",{url:"/welfare-fraud",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone been convicted of welfare fraud?",$scope.route_name="welfare-fraud",$scope.data_name="welfare_fraud",$scope.data_name_input="welfare_fraud_input",$scope.to_route_name="law-enforcement",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.law-enforcement",{url:"/law-enforcement",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Is anyone fleeing from law enforcement?",$scope.route_name="law-enforcement",$scope.data_name="law_enforcement",$scope.data_name_input="law_enforcement_input",$scope.to_route_name="main",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.income",{url:"/income",templateUrl:"templates/interview/interview-income.html",controller:"interviewCtrl"}).state("int.other-income-worked-90-days",{url:"/worked-90-days",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone worked in the last 90 days?",$scope.route_name="worked-90-days",$scope.data_name="worked_90_days",$scope.data_name_input="worked_90_days_input",$scope.to_route_name="other-income-worked-reduced-hours",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.other-income-worked-reduced-hours",{url:"/worked-reduced-hours",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone had work hours reduced in the last 60 days?",$scope.route_name="worked-reduced-hours",$scope.data_name="worked_reduced_hours",$scope.data_name_input="worked_reduced_hours_input",$scope.to_route_name="stopped-working",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.stopped-working",{url:"/stopped-working",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone stopped working at one or more jobs in the past 30 days?",$scope.route_name="stopped-working",$scope.data_name="stopped_working",$scope.data_name_input="stopped_working_input",$scope.to_route_name="on-strike",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.on-strike",{url:"/on-strike",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Is anyone on strike?",$scope.route_name="on-strike",$scope.data_name="on_strike",$scope.data_name_input="on_strike_input",$scope.to_route_name="on-social-security",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.on-social-security",{url:"/on-social-security",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone received Social Security in the past?",$scope.route_name="on-social-security",$scope.data_name="on_social_security",$scope.data_name_input="on_social_security_input",$scope.to_route_name="on-ssi",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.on-ssi",{url:"/on-ssi",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone received Supplemental Security Income in the past?",$scope.route_name="on-ssi",$scope.data_name="on_ssi",$scope.data_name_input="on_ssi_input",$scope.to_route_name="applied-for-workers-comp",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.applied-for-workers-comp",{url:"/applied-for-workers-comp",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone applied for workers' compensation?",$scope.route_name="applied-for-workers-comp",$scope.data_name="applied_for_workers_comp",$scope.data_name_input="applied_for_workers_comp_input",$scope.to_route_name="applied-for-social-security",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.applied-for-social-security",{url:"/applied-for-social-security",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone applied for social security?",$scope.route_name="applied-for-social-security",$scope.data_name="applied_for_social_security",$scope.data_name_input="applied_for_social_security_input",$scope.to_route_name="applied-for-unemployment-compensation",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.applied-for-unemployment-compensation",{url:"/applied-for-unemployment-compensation",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone applied for unemployment compensation?",$scope.route_name="applied-for-unemployment-compensation",$scope.data_name="applied_for_unemployment_comp",$scope.data_name_input="applied_for_unemployment_comp_input",$scope.to_route_name="applied-for-veterans-benefits",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.applied-for-veterans-benefits",{url:"/applied-for-veterans-benefits",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone applied for veterans benefits?",$scope.route_name="applied-for-veterans-benefits",$scope.data_name="applied_for_veterans_benefits",$scope.data_name_input="applied_for_veterans_benefits_input",$scope.to_route_name="applied-for-ssi",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1,console.log($scope.current_user)
}]}).state("int.applied-for-ssi",{url:"/applied-for-ssi",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Has anyone applied for Supplemental Security Income (SSI)?",$scope.route_name="applied-for-ssi",$scope.data_name="applied_for_ssi",$scope.data_name_input="applied_for_ssi_input",$scope.to_route_name="daycare-for-school",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.$parent.user,$scope.show_input=!1}]}).state("int.daycare-for-school",{url:"/daycare-for-school",templateUrl:"templates/interview/interview-household-pay-care-for-school.html",controller:"interviewCtrl"}).state("int.cost-for-income",{url:"/cost-for-income",templateUrl:"templates/interview/interview-yesno-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Does it cost anyone anything to get the income listed above? (Such as transportation costs, court fees, bank or guardian fees, etc.)?",$scope.route_name="cost-for-income",$scope.data_name="cost_for_income",$scope.data_name_input="cost_for_income_input",$scope.to_route_name="resources",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.resources",{url:"/resources",templateUrl:"templates/interview/interview-resources.html",controller:"interviewCtrl"}).state("int.resources-expecting-money",{url:"/resources-expecting-money",templateUrl:"templates/interview/interview-resources-expecting-money.html"}).state("int.resources-sold-stuff",{url:"/resources-sold-stuff",templateUrl:"templates/interview/interview-resources-sold-stuff.html"}).state("int.resources-own-property",{url:"/resources-own-property",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Does anyone own any homes or property that they donâ€™t live in?",$scope.route_name="resources-own-property",$scope.data_name="resources_own_property",$scope.to_route_name="resources-owned-vehicles",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.resources-owned-vehicles",{url:"/resources-num-vehicles-owned",templateUrl:"templates/interview/interview-resources-owned-vehicles.html",controller:"interviewCtrl"}).state("int.resources-burial-agreement",{url:"/resources-burial-agreement",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Does anyone have a burial agreement with a bank or funeral home?",$scope.route_name="resources-burial-agreement",$scope.data_name="resources_burial_agreement",$scope.to_route_name="resources-life-insurance",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.resources-life-insurance",{url:"/resources-life-insurance",templateUrl:"templates/interview/interview-household-yesnowho-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="Does anyone have a life insurance policy?",$scope.route_name="resources-life-insurance",$scope.data_name="resources_life_insurance",$scope.to_route_name="main",$scope.model_for_route=$scope.current_user,$scope.model_for_input=$scope.current_user,$scope.show_input=!1}]}).state("int.expenses-child-support",{url:"/child-support-expenses",templateUrl:"templates/interview/interview-expenses-child-support-expenses.html",controller:"interviewCtrl"}).state("int.expenses-housing-assistance",{url:"/receive-housing-assistance",templateUrl:"templates/interview/interview-expenses-housing-assistance.html",controller:"interviewCtrl"}).state("int.monthly-expenses-rent",{url:"/monthly-expenses-rent",templateUrl:"templates/interview/interview-monthly-expenses-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="rent, mortgage or lot rent",$scope.alt_question="Are meals included in your rent?",$scope.alt_question_data="rent_meals_included",$scope.route_name="monthly-expenses-rent",$scope.data_name="monthly_expenses_rent",$scope.to_route_name="monthly-expenses-condo",$scope.model_for_route=$scope.current_user,$scope.show_input=!1}]}).state("int.monthly-expenses-condo",{url:"/monthly-expenses-condo",templateUrl:"templates/interview/interview-monthly-expenses-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="condominium fees",$scope.route_name="monthly-expenses-condo",$scope.data_name="monthly_expenses_condo",$scope.to_route_name="monthly-expenses-property-insurance",$scope.model_for_route=$scope.current_user,$scope.show_input=!1}]}).state("int.monthly-expenses-property-insurance",{url:"/monthly-expenses-property-insurance",templateUrl:"templates/interview/interview-monthly-expenses-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="property insurance",$scope.route_name="monthly-expenses-property-insurance",$scope.data_name="monthly_expenses_prop_insurance",$scope.to_route_name="monthly-expenses-property-taxes",$scope.model_for_route=$scope.current_user,$scope.show_input=!1}]}).state("int.monthly-expenses-property-taxes",{url:"/monthly-expenses-property-taxes",templateUrl:"templates/interview/interview-monthly-expenses-template.html",controller:["$scope","userDataFactory",function($scope,userDataFactory){$scope.current_user=userDataFactory.userData.user.formData,$scope.title="property taxes",$scope.route_name="monthly-expenses-property-taxes",$scope.data_name="monthly_expenses_prop_taxes",$scope.to_route_name="expenses-utilities",$scope.model_for_route=$scope.current_user,$scope.show_input=!1}]}).state("int.expenses-utilities",{url:"/expenses-utilities",templateUrl:"templates/interview/interview-expenses-utilities.html"}).state("int.expenses-medical",{url:"/expenses-medical",templateUrl:"templates/interview/interview-expenses-medical.html",controller:"interviewCtrl"}).state("int.info-confirmation",{url:"/confirmation",templateUrl:"templates/interview/interview-info-confirmation.html"}).state("int.info-review",{url:"/review",templateUrl:"templates/interview/interview-review-app.html"}).state("int.info-esig-confirm",{url:"/confirm-esignature",templateUrl:"templates/interview/interview-esignature-legal.html"}).state("int.interview-preview-sign",{url:"/sign",templateUrl:"templates/interview/interview-application-signature.html"}).state("int.app-submission",{url:"/submission",templateUrl:"templates/interview/interview-application-submission.html"})}]),angular.module("formApp.interviewCtrl",["formApp.userDataFactory","formApp.apiFactory","formApp.jSignature","formApp.CalcBenefitService"]).controller("interviewCtrl",["$scope","$state","$rootScope","$location","$anchorScroll","$window","userDataFactory","API","calcBenefitService",function($scope,$state,$rootScope,$location,$anchorScroll,$window,userDataFactory,API,calcBenefitService){function updateProgress(name){$scope.stepsCompleted[name]=!0,$scope.int_progress=0;for(var x in $scope.stepsCompleted)$scope.stepsCompleted[x]===!0&&($scope.int_progress+=2.5)}function updateProgressStatus(){$scope.interview_progress_status=$scope.interviewCompleted.eligibility&&$scope.interviewCompleted.household&&$scope.interviewCompleted.income&&$scope.interviewCompleted.expenses?2:$scope.interviewCompleted.eligibility||$scope.interviewCompleted.household||$scope.interviewCompleted.income||$scope.interviewCompleted.expenses?1:0}function removeHouseholdMembersNotApplying(){for(var i=0;i<$scope.user.household-1;i++)"undefined"==typeof $scope.user.household_members[i]||0!=$scope.user.household_members[i].applying&&"undefined"!=typeof $scope.user.household_members[i].name||($scope.user.household_members[i].relation=" ")}function isEmpty(object){for(var i in object)if(object.hasOwnProperty(i))return!0;return!1}console.log("loading interview controller!"),$scope.show_interview_progress=!1,$scope.int_progress=0,$scope.appSubmissionInProcess=!1,$scope.show_sig1=!1,$scope.show_sig2=!1,$scope.show_esig_info=!1,$scope.otherStateBenefits=!1,$scope.inputDisqualified=!1,$scope.inputDiffName=!1,$scope.inputFosterCare=!1,$scope.inputFosterCareEnd=!1,$scope.inputMedNeed=!1,$scope.inputMedMedication=!1,$scope.interview_progress_status=0,$scope.interview_steps=-1,$scope.user=userDataFactory.userData.user.formData,$scope.user.household_members="undefined"!=typeof $scope.user.household_members?$scope.user.household_members:{},$scope.interviewCompleted=userDataFactory.userData.interviewProgress,$scope.estimated_benefit=$scope.user.benefit_amount,console.log($scope.user),$scope.today=new Date;var dd=$scope.today.getDate(),mm=$scope.today.getMonth()+1,yyyy=$scope.today.getFullYear();if(10>dd&&(dd="0"+dd),10>mm&&(mm="0"+mm),$scope.today=mm+"/"+dd+"/"+yyyy,$scope.user.disabled="no",$scope.minutes_saved=0,!isEmpty($scope.user.household_members))for(var i=0;i<$scope.user.household-1;i++)$scope.user.household_members[i]={applying:!1,income:0,show:!1,relation:"Select"};$scope.stepsCompleted={"int.dob":!1,"int.self-gender":!1,"int.marital_status":!1,"int.state_id":!1,"int.school":!1,"int.pregnant":!1,"int.household":!1,"int.household-applying":!1,"int.household-ssn":!1,"int.household-dob":!1,"int.household-relation":!1,"int.other-state-benefits":!1,"int.income-frequency":!1,"int.income-hours":!1,"int.income-household-amount":!1,"int.income-household-frequency":!1,"int.resources":!1,"int.expenses-mortgage":!1};var interviewMinutesCategory={eligibility:5,household:10,income:5,expenses:5};$scope.BoolOpts=[{value:!0,name:"Yes"},{value:!1,name:"No"}],$scope.YNOpts=[{value:"yes",name:"yes"},{value:"no",name:"no"}],$scope.Grade=[{value:"K",name:"Kindergarden"},{value:"1",name:"1st"},{value:"2",name:"2nd"},{value:"3",name:"3rd"},{value:"4",name:"4th"},{value:"5",name:"5th"},{value:"6",name:"6th"},{value:"7",name:"7th"},{value:"8",name:"8th"},{value:"9",name:"9th"},{value:"10",name:"10th"},{value:"11",name:"11th"},{value:"12",name:"12th"},{value:"Freshman",name:"College-Freshman"},{value:"Sophomore",name:"College-Sophomore"},{value:"Junior",name:"College-Junior"},{value:"Senior",name:"College-Senior"},{value:"Graduate",name:"Graduate"}],$scope.MaritalOpts=[{value:"Single",name:"Single"},{value:"Married",name:"Married"},{value:"Divorced",name:"Divorced"},{value:"Separated",name:"Separated"},{value:"Widowed",name:"Widowed"}],$scope.relationshipOptions=[{name:"Select",value:"Select"},{name:"Partner",value:"Partner"},{name:"Child",value:"Child"},{name:"Parent",value:"Parent"},{name:"Roommate",value:"Roommate"},{name:"Family",value:"Family"}],$scope.showHouseholdMember=function(k){for(var n in $scope.user.household_members)$scope.user.household_members[n].name==k&&($scope.user.household_members[n].show=!$scope.user.household_members[n].show)},$scope.hasApplyingMembers=function(){var isApplying=!1;for(var member in $scope.user.household_members)isApplying=isApplying||$scope.user.household_members[member].applying;return isApplying},$scope.updateMinutes=function(num){$scope.minutes_saved+=num},$scope.hasHouseholdMembers=function(){var has_members=!1;for(var member in $scope.user.household_members)has_members=has_members||$scope.user.household_members[member].name;return has_members},$scope.current_resource_name="",$scope.current_resource_kind="",$scope.current_resource_amount=0,$scope.current_resource_location="",$scope.addResource=function(){$scope.user.resources||($scope.user.resources=[]),$scope.user.resources.push({person_name:$scope.current_resource_name,type:$scope.current_resource_kind,amount:$scope.current_resource_amount,location:$scope.currentresource_location}),$scope.current_resource_name="",$scope.current_resource_kind="",$scope.current_resource_amount=0,$scope.current_resource_location=""},$scope.current_income_name="",$scope.current_income_kind="",$scope.current_income_amount=0,$scope.current_income_frequency="",$scope.current_income_recent_date="",$scope.addIncome=function(){$scope.user.incomes||($scope.user.incomes=[]),console.log($scope.current_income_name),console.log(typeof $scope.user.incomes),console.log($scope.user.incomes),console.log("trying to push to array"),$scope.user.incomes.push({person_name:$scope.current_income_name,type:$scope.current_income_kind,amount:$scope.current_income_amount,frequency:$scope.current_income_frequency,recent_date:$scope.current_income_recent_date}),console.log($scope.user.incomes),$scope.current_income_name="",$scope.current_income_kind="",$scope.current_income_amount=0,$scope.current_income_frequency="",$scope.current_income_recent_date=""},$scope.$on("int-main",function(meta,type){$scope.interviewCompleted[type]||$scope.updateMinutes(interviewMinutesCategory[type]),$scope.interviewCompleted[type]=!0,$scope.show_interview_progress=!1,calcBenefitService.calculate($scope.user),API.uploadPartialInterviewInfo($scope.user,function(result){result||alert("Oops! Looks like something went wrong. Your information was NOT submitted. Please refill your information")})}),$scope.$on("start-last-step",function(){API.uploadPartialInterviewInfo($scope.user,function(){})}),$scope.goToSignPage=function(){$state.go("int.interview-preview-sign"),$scope.show_sig1=!0},$scope.goToSig1=function(){$scope.show_sig1=!0,$location.hash("sig_container1"),$anchorScroll(),document.getElementById("image_wrapper_1").scrollLeft=467},$scope.goToSig2=function(){$scope.show_sig2=!0,$location.hash("sig_container2"),$anchorScroll(),document.getElementById("image_wrapper_5").scrollLeft=163},$rootScope.$on("$viewContentLoaded",function(){"int.interview-preview-sign"==$state.current.name&&($scope.goToSig1(),document.getElementById("topOfSignPage").style.display="none")}),$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState){switch("int.main"!==fromState.name&&$scope.int_progress<100&&updateProgress(fromState.name),"int.main"==fromState.name&&($scope.show_interview_progress=!0),"int.main"==toState.name&&($scope.show_interview_progress=!1),toState.name){case"int.dob":case"int.self-gender":case"int.marital_status":case"int.state_id":case"int.school":case"int.school-grade":case"int.school-name":case"int.school-FT":case"int.pregnant":case"int.pregnant-due-date":case"int.pregnant-num-babies":case"int.disabled":$scope.interview_steps=0;break;case"int.household":case"int.other-state-benefits":case"int.disqualification":case"int.other-name-applied":case"int.in-military":case"int.in-military-family":case"int.foster-care":case"int.foster-care-end":case"int.medical-need":case"int.medical-lt-care":case"int.medical-unpaid":case"int.domestic-abuse":case"int.medical-medication":case"int.drug-abuse":case"int.criminal-defendant":case"int.criminal-fines-payment":case"int.criminal-payment-plan":case"int.criminal-probation":case"int.welfare-fraud":case"int.law-enforcement":$scope.interview_steps=1;break;case"int.income":case"int.other-income-worked-90-days":case"int.other-income-worked-reduced-hours":case"int.stopped-working":case"int.on-strike":case"int.on-social-security":case"int.on-ssi":case"int.applied-for-workers-comp":case"int.applied-for-social-security":case"int.applied-for-unemployment-compensation":case"int.applied-for-veterans-benefits":case"int.applied-for-ssi":case"int.daycare-for-school":case"int.cost-for-income":case"int.resources":$scope.interview_steps=2;break;case"int.expenses-child-support":case"int.expenses-housing-assistance":case"int.monthly-expenses-rent":case"int.monthly-expenses-condo":case"int.monthly-expenses-property-insurance":case"int.monthly-expenses-property-taxes":case"int.expenses-utilities":case"int.expenses-medical":$scope.interview_steps=3;break;case"int.info-confirmation":$scope.goToTop(),$scope.interview_steps=4;break;case"int.interview-preview-sign":case"int.info-review":$scope.scrollUpSignPage(),$scope.interview_steps=5;break;case"int.app-submission":$scope.interview_steps=6;break;case"int.main":$scope.interview_steps=-1;break;default:$scope.interview_steps=4}$scope.goToTop(),updateProgressStatus()}),$scope.inputOtherStateBenefits=function(){$scope.otherStateBenefits=!0},$scope.inputDisqualification=function(){$scope.inputDisqualified=!0},$scope.inputDifferentName=function(){$scope.inputDiffName=!0},$scope.inputInFosterCare=function(){$scope.inputFosterCare=!0},$scope.inputFosterCareEndedDueToAge=function(){$scope.inputFosterCareEnd=!0},$scope.inputMedicalNeed=function(){$scope.inputMedNeed=!0},$scope.getCity=function(){"undefined"!=typeof $scope.user.address.zip?API.getCityFromZip($scope.user.address.zip,function(err,data){$scope.user.address.city=err?" ":data.results[0].address_components[1].long_name.length>27?data.results[0].address_components[1].short_name:data.results[0].address_components[1].long_name}):$scope.user.address.city=" "},$scope.$on("process-app-data",function(){removeHouseholdMembersNotApplying(),$scope.getCity(),$scope.calcPersonsWithIncome()}),$scope.calcPersonsWithIncome=function(){$scope.personsWithIncome=[],"undefined"!=typeof $scope.user.monthly_income&&$scope.personsWithIncome.push({name:$scope.user.name.first_name+" "+$scope.user.name.last_name,amount:$scope.user.monthly_income,hours_per_month:"number"==typeof $scope.user.hours_wk&&"number"==typeof $scope.user.wk_month?$scope.user.wk_month*$scope.user.hours_wk:" "});for(var p in $scope.user.household_members)$scope.user.household_members.hasOwnProperty(p)&&$scope.user.household_members[p].applying===!0&&"number"==typeof $scope.user.household_members[p].income&&$scope.personsWithIncome.push({name:$scope.user.household_members[p].name,amount:$scope.user.household_members[p].income,hours_per_month:"number"==typeof $scope.user.household_members[p].hours_wk&&"number"==typeof $scope.user.household_members[p].wk_month?$scope.user.household_members[p].wk_month*$scope.user.household_members[p].hours_wk:" "});$scope.personsWithIncome=$scope.personsWithIncome.length>3?$scope.personsWithIncome.slice(0,3):$scope.personsWithIncome,console.log($scope.personsWithIncome)},$scope.submitSignedApplication=function(){"undefined"!=typeof $scope.user.sig1&&"undefined"!=typeof $scope.user.sig2?($scope.appSubmissionInProcess=!0,API.uploadPartialInterviewInfo($scope.user,function(result){result?$state.go("int.app-submission"):($scope.appSubmissionInProcess=!1,alert("Oops! Looks like something went wrong. Your form was NOT submitted. Please wait and try again."))})):alert("Note you must sign the form in both signature boxes in order to submit an application.")},$scope.getNumber=function(n){return new Array(n-1)},$scope.goBack=function(){"int.interview-preview-sign"===$state.current.name?(document.getElementById("topOfSignPage").style.display="block",$state.go("int.info-review")):window.history.back()},$scope.goToTop=function(){$location.hash("topOfSignPage"),$anchorScroll()},$scope.updateCurrentAndGoToNext=function(current,next){console.log($scope.user),setTimeout(function(){updateProgress(current),$state.go(next)},200)},$scope.backToMainSign=function(index){var img_container=document.getElementById("image_wrapper"+index),header=document.getElementById("page_header"+index),pg_header=document.getElementById("sign_header"),tp_sign_page=document.getElementById("topOfSignPage");pg_header.style.display="block",tp_sign_page.style.display="block",header.style.display="none",img_container.style.display="none",img_container.style.bottom="0",$location.hash("topOfSignPage"),$anchorScroll()},$scope.expandThumbnail=function(index){var img_container=document.getElementById("image_wrapper"+index),header=document.getElementById("page_header"+index),pg_header=document.getElementById("sign_header"),tp_sign_page=document.getElementById("topOfSignPage");pg_header.style.display="none",tp_sign_page.style.display="none",header.style.display="block",header.style.position="absolute",header.style.top="0",header.style.left="0",img_container.style.display="block",img_container.style.position="absolute",img_container.style.top="50px",img_container.style.left="0",$location.hash("page_header"+index),$anchorScroll()},$scope.scrollDown=function(){$location.hash("confirm_anchor"),$anchorScroll()},$scope.scrollUpSignPage=function(){$location.hash("sign_header"),$anchorScroll()}}]);